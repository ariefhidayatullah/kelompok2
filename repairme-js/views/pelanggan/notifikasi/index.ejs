<%- include('../templates/header') -%>
<%- include('../templates/footer') -%>

<script>
	 var vm = new Vue({

        el: "#app",
        data: {
            sidebar_menu: {
                beranda: 'active'
            },
            notifikasi: null,
            pelanggan: null
        },
        mounted() {
            this.getData()
            this.getNotifikasi()
        },
        methods: {
            getData(){
                axios({
                    method: 'get',
                    url: '/api/pelanggan/' + '<%= email %>'
                }).then(response => {
                    this.pelanggan = response.data;
                })
            },
            warning: function (message) {
		        setTimeout(function () {
		          toastr.warning(
		            message
		            );
		        }, 10);
		      },
		      success: function (success) {
		        setTimeout(function () {
		          toastr.success(
		            success
		            );
		        }, 10);
		      },
		      error: function (error) {
		        setTimeout(function () {
		          toastr.error(
		            error
		            );
		        }, 10);
		      },
            getNotifikasi(){
                axios.get('/api/notifikasi/jenis/pelanggan/' + '<%= email %>' + '/t')
                .then(response => {
                    this.notifikasi = response.data
                })
            },
            getNotifikasiTanggal(value){
                return moment(value, "Do MMMM YYYY, HH:mm:ss").fromNow()
            },
        }

    })
</script>